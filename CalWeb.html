<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Refined Graph Layout (Framer Style)</title>
<style>
  body {
    margin:0;
    padding:0;
    background-color:#F4F8FA;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    color:#333;
    overflow:hidden;
  }

  .container {
    display: flex;
    flex-direction: row;
    height: 100vh;
    box-sizing: border-box;
  }

  .left-panel {
    flex: 0 0 300px;
    background-color: #fff;
    border-right:1px solid #e0e0e0;
    display:flex; 
    flex-direction:column;
    overflow:auto;
    padding:20px;
  }

  .right-panel {
    flex:1;
    display:flex;
    flex-direction:column;
    background-color:#F4F8FA;
    position:relative;
    padding:20px;
  }

  .section {
    margin-bottom:30px;
    width:100%;
  }
  .section h3 {
    margin:0 0 12px 0;
    font-size:16px;
    font-weight:500;
    color:#333;
  }
  .section small {
    color:#666;
    font-size:12px;
  }

  .input-area {
    display:block;
    width: 100%;
    box-sizing:border-box;
    padding:8px;
    margin-bottom:10px;
    border:1px solid #ddd;
    border-radius:5px;
    font-size:14px;
    background:#fff;
  }

  .input-group {
    margin-bottom:10px;
  }

  .btn {
    display:inline-block;
    padding:8px 12px;
    border:1px solid #ddd;
    border-radius:5px;
    background:#fff;
    cursor:pointer;
    margin-right:5px;
    font-size:14px;
    transition: background 0.2s, box-shadow 0.2s;
    color:#333;
    text-decoration:none;
    font-weight:500;
  }

  .btn:hover {
    background:#f7f7f7;
    box-shadow:0 1px 3px rgba(0,0,0,0.05);
  }

  .control-section {
    margin-bottom:12px;
  }
  .control-section label {
    font-size:14px;
    margin-right:5px;
    color:#333;
    font-weight:400;
  }

  /* Function Palette */
  .function-palette {
    display:flex;
    flex-wrap:wrap;
    gap:5px;
    margin-bottom:10px;
  }
  .function-palette .fp-btn {
    background:#fff;
    border:1px solid #ddd;
    border-radius:5px;
    padding:5px 8px;
    cursor:pointer;
    font-size:12px;
    transition:background 0.2s, box-shadow 0.2s;
    color:#333;
    font-weight:400;
  }
  .function-palette .fp-btn:hover {
    background:#f7f7f7;
    box-shadow:0 1px 3px rgba(0,0,0,0.05);
  }

  /* Graph and Toolbar */
  .graph-container {
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    flex:1;
    position:relative;
    background: linear-gradient(to bottom right, #F4F8FA, #FFFFFF);
    overflow:hidden;
    border-radius:10px;
    border:1px solid #ddd;
  }

  /* Hover info box */
  .graph-hover-info {
    position:absolute;
    top:5px;
    left:5px;
    background:#fff;
    border:1px solid #ddd;
    border-radius:3px;
    padding:5px;
    font-size:12px;
    pointer-events:none;
    display:none;
    color:#333;
    font-weight:400;
  }

  /* Toolbar */
  .graph-toolbar {
    position:absolute;
    top:15px;
    right:15px;
    background:#fff;
    border:1px solid #ddd;
    border-radius:5px;
    display:flex;
    flex-direction:row;
    box-shadow:0 1px 3px rgba(0,0,0,0.1);
    overflow:hidden;
  }
  .graph-toolbar .btn {
    border:none;
    border-right:1px solid #ddd;
    background:#fff;
    font-size:14px;
    font-weight:500;
  }
  .graph-toolbar .btn:last-child {
    border-right:none;
  }

  /* Drawing Area */
  .drawing-container {
    position:relative;
  }
  .drawing-canvas {
    border:1px solid #ddd;
    background:#fff;
    cursor:crosshair;
    border-radius:5px;
  }
  .draw-axis-canvas {
    position:absolute;
    top:0; left:0;
    pointer-events:none;
  }

  /* Calculator Modal */
  .calculator-modal {
    position: fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#fff;
    border:1px solid #ddd;
    border-radius:8px;
    box-shadow:0 2px 10px rgba(0,0,0,0.1);
    width:300px;
    display:none;
    z-index:9999;
  }
  .calculator-header {
    padding:10px;
    background:#F4F8FA;
    border-bottom:1px solid #ddd;
    text-align:center;
    font-weight:500;
    position:relative;
    color:#333;
  }
  .calculator-body {
    padding:10px;
  }
  .calc-display {
    width:100%;
    box-sizing:border-box;
    padding:8px;
    margin-bottom:10px;
    border:1px solid #ddd;
    font-size:16px;
    text-align:right;
    border-radius:3px;
    background:#fff;
    color:#333;
  }
  .calc-row {
    display:flex;
    margin-bottom:5px;
  }
  .calc-btn {
    flex:1;
    margin-right:5px;
    background:#fff;
    border:1px solid #ddd;
    border-radius:3px;
    font-size:14px;
    text-align:center;
    cursor:pointer;
    padding:8px 0;
    transition:background 0.2s, box-shadow 0.2s;
    color:#333;
    font-weight:400;
  }
  .calc-btn:last-child {
    margin-right:0;
  }
  .calc-btn:hover {
    background:#f7f7f7;
    box-shadow:0 1px 3px rgba(0,0,0,0.05);
  }
  .close-btn {
    position:absolute;
    top:5px;
    right:5px;
    cursor:pointer;
    font-size:14px;
    color:#333;
  }

</style>
</head>
<body>
<div class="container">
  <div class="left-panel">

    <!-- Equations Input -->
    <div class="section">
      <h3>1. Equations Input</h3>
      <small>Enter multiple equations (one per line). For 3D use z=. Click buttons to insert functions.</small>
      <div class="function-palette">
        <!-- Example function buttons -->
        <div class="fp-btn" data-func="\\sin(x)">sin</div>
        <div class="fp-btn" data-func="\\cos(x)">cos</div>
        <div class="fp-btn" data-func="\\tan(x)">tan</div>
        <div class="fp-btn" data-func="x^2">x²</div>
        <div class="fp-btn" data-func="Math.sqrt(x)">√x</div>
        <div class="fp-btn" data-func="\\sin(x)*\\cos(x)">sin(x)*cos(x)</div>
        <div class="fp-btn" data-func="\\tan(x)*x">tan(x)*x</div>
        <div class="fp-btn" data-func="x^3">x³</div>
      </div>
      <textarea id="equationInput" class="input-area" placeholder="e.g. \sin(x), x^2, or z=sin(x)*cos(y)"></textarea>

      <div class="control-section">
        <label>Line Style:</label>
        <select id="lineStyle" class="input-area" style="padding:4px;">
          <option value="solid">Solid</option>
          <option value="dashed">Dashed</option>
          <option value="dotted">Dotted</option>
          <option value="double">Double</option>
          <option value="groove">Thick (Groove)</option>
        </select>
      </div>
      <div class="control-section">
        <label>Color:</label>
        <input type="color" id="lineColor" class="input-area" value="#0072BD" style="padding:0;">
      </div>
      <div class="control-section" style="display:flex;align-items:center;">
        <input type="checkbox" id="fillArea" style="margin-right:5px;">
        <label for="fillArea">Fill Area Under Curve (2D only)</label>
      </div>

      <div class="control-section">
        <label>Dimension:</label>
        <label><input type="radio" name="dimension" value="2D" checked>2D</label>
        <label><input type="radio" name="dimension" value="3D">3D</label>
      </div>

      <div class="control-section">
        <label>Overlay Mode:</label>
        <label><input type="radio" name="overlayMode" value="overlay" checked>Overlay</label>
        <label><input type="radio" name="overlayMode" value="new">New Graph</label>
      </div>

      <div class="control-section">
        <button class="btn" id="drawButton">Draw</button>
      </div>
    </div>

    <!-- Calculator -->
    <div class="section">
      <h3>2. Engineering Calculator</h3>
      <div class="input-group" style="display:flex; align-items:center;">
        <input type="text" id="calcExpression" class="input-area" placeholder="Enter expression to calculate"/>
        <button class="btn" id="openCalc">=</button>
      </div>
      <small>You can use the calculated result in the equations above or elsewhere.</small>
    </div>

    <!-- Drawing Area -->
    <div class="section">
      <h3>3. Free Drawing -> Function</h3>
      <div class="drawing-container" style="width:260px; height:150px; position:relative;">
        <canvas id="drawCanvas" class="drawing-canvas" width="260" height="150"></canvas>
        <canvas id="drawAxisCanvas" class="draw-axis-canvas" width="260" height="150"></canvas>
      </div>
      <div style="margin-top:10px;">
        <button class="btn" id="clearDraw">Clear</button>
        <button class="btn" id="generateFunc">Generate Function</button>
      </div>
      <small>Draw a curve, then click "Generate Function" to approximate it.</small>
    </div>

  </div>

  <div class="right-panel">
    <div class="graph-container">
      <canvas id="graphCanvas" width="600" height="400"></canvas>
      <div class="graph-hover-info" id="graphHoverInfo"></div>
      <div class="graph-toolbar">
        <button class="btn" id="zoomInBtn">+</button>
        <button class="btn" id="zoomOutBtn">-</button>
        <button class="btn" id="resetZoomBtn">Reset</button>
      </div>
    </div>
  </div>
</div>

<!-- Calculator Modal -->
<div class="calculator-modal" id="calculatorModal">
  <div class="calculator-header">
    Engineering Calculator
    <span class="close-btn" id="closeCalc">✕</span>
  </div>
  <div class="calculator-body">
    <input type="text" class="calc-display" id="calcDisplay" readonly />
    <div class="calc-row">
      <div class="calc-btn" data-val="7">7</div>
      <div class="calc-btn" data-val="8">8</div>
      <div class="calc-btn" data-val="9">9</div>
      <div class="calc-btn" data-val="/">÷</div>
    </div>
    <div class="calc-row">
      <div class="calc-btn" data-val="4">4</div>
      <div class="calc-btn" data-val="5">5</div>
      <div class="calc-btn" data-val="6">6</div>
      <div class="calc-btn" data-val="*">×</div>
    </div>
    <div class="calc-row">
      <div class="calc-btn" data-val="1">1</div>
      <div class="calc-btn" data-val="2">2</div>
      <div class="calc-btn" data-val="3">3</div>
      <div class="calc-btn" data-val="-">-</div>
    </div>
    <div class="calc-row">
      <div class="calc-btn" data-val="0">0</div>
      <div class="calc-btn" data-val=".">.</div>
      <div class="calc-btn" data-val="(">(</div>
      <div class="calc-btn" data-val=")">)</div>
    </div>
    <div class="calc-row">
      <div class="calc-btn" data-val="sin(">sin</div>
      <div class="calc-btn" data-val="cos(">cos</div>
      <div class="calc-btn" data-val="tan(">tan</div>
      <div class="calc-btn" data-val="+">+</div>
    </div>
    <div class="calc-row">
      <div class="calc-btn" data-val="^">^</div>
      <div class="calc-btn" data-val="√">√</div>
      <div class="calc-btn" data-val="Math.log10(">log</div>
      <div class="calc-btn" data-val="Math.exp(">exp</div>
    </div>
    <div class="calc-row">
      <div class="calc-btn" id="calcClear">C</div>
      <div class="calc-btn" id="calcEquals">=</div>
    </div>
  </div>
</div>
<!-- JavaScript goes here -->
</body>
</html>